{"version":3,"sources":["webpack:///./src/views/findpwd/index.vue?d62d","webpack:///src/views/findpwd/index.vue","webpack:///./src/views/findpwd/index.vue?4b5b","webpack:///./src/views/findpwd/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","style","height","attrs","position","duration","model","value","callback","$$v","show","expression","title","left-text","left-arrow","on","click-left","onClickBack","verify","btnuseFn","required","clearable","label","right-icon","phonIcon","placeholder","error-message","phoneState","phone","center","sms","background","btnColor","borderColor","slot","size","type","disabled","btnflag","click","sendCode","_v","passwordIcon","passwordState","password","pwdColor","block","pwdBtnflag","ver","pwdFn","findpwd","staticRenderFns","vue_runtime_esm","use","nav_bar","field","es_button","icon","popup","dialog","toast","cell","cell_group","findpwdvue_type_script_lang_js_","data","code","beforeRouteEnter","to","from","next","vm","methods","$router","back","_this","fetch","then","res","json","confirm","message","push","catch","Object","_this2","test","length","method","headers","Content-Type","body","data1","computed","views_findpwdvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d0f0be6.79ef952c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('van-popup',{style:({ height: '100%' }),attrs:{\"position\":\"bottom\",\"duration\":0.5},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('van-nav-bar',{attrs:{\"title\":\"忘记密码\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickBack}}),_c('div',{staticClass:\"main\",attrs:{\"verify\":_vm.btnuseFn()}},[_c('van-cell-group',[_c('van-field',{attrs:{\"required\":\"\",\"clearable\":\"\",\"label\":\"手机号\",\"right-icon\":_vm.phonIcon,\"placeholder\":\"请输入手机号\",\"error-message\":_vm.phoneState},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}}),_c('van-field',{attrs:{\"center\":\"\",\"clearable\":\"\",\"label\":\"验证码\",\"placeholder\":\"请输入验证码\"},model:{value:(_vm.sms),callback:function ($$v) {_vm.sms=$$v},expression:\"sms\"}},[_c('van-button',{style:({background: _vm.btnColor,borderColor:_vm.btnColor}),attrs:{\"slot\":\"button\",\"size\":\"small\",\"type\":\"primary\",\"disabled\":_vm.btnflag},on:{\"click\":_vm.sendCode},slot:\"button\"},[_vm._v(\"获取验证码\")])],1),_c('van-field',{attrs:{\"type\":\"password\",\"label\":\"新密码\",\"placeholder\":\"请输入密码\",\"right-icon\":_vm.passwordIcon,\"error-message\":_vm.passwordState,\"required\":\"\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('van-button',{style:({background: _vm.pwdColor,borderColor:_vm.pwdColor}),attrs:{\"type\":\"primary\",\"size\":\"normal\",\"block\":true,\"disabled\":_vm.pwdBtnflag,\"ver\":_vm.pwdFn()},on:{\"click\":_vm.findpwd}},[_vm._v(\"确认\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <van-popup v-model=\"show\" position=\"bottom\" :style=\"{ height: '100%' }\" :duration=\"0.5\">\r\n      <van-nav-bar title=\"忘记密码\" left-text=\"返回\" left-arrow @click-left=\"onClickBack\" />\r\n      <div class=\"main\" :verify=\"btnuseFn()\">\r\n        <van-cell-group>\r\n          <van-field\r\n            v-model=\"phone\"\r\n            required\r\n            clearable\r\n            label=\"手机号\"\r\n            :right-icon=\"phonIcon\"\r\n            placeholder=\"请输入手机号\"\r\n            :error-message=\"phoneState\"\r\n          />\r\n          <van-field v-model=\"sms\" center clearable label=\"验证码\" placeholder=\"请输入验证码\">\r\n            <van-button\r\n              slot=\"button\"\r\n              size=\"small\"\r\n              type=\"primary\"\r\n              @click=\"sendCode\"\r\n              :disabled=\"btnflag\"\r\n              :style=\"{background: btnColor,borderColor:btnColor}\"\r\n            >获取验证码</van-button>\r\n          </van-field>\r\n          <van-field\r\n            v-model=\"password\"\r\n            type=\"password\"\r\n            label=\"新密码\"\r\n            placeholder=\"请输入密码\"\r\n            :right-icon=\"passwordIcon\"\r\n            :error-message=\"passwordState\"\r\n            required\r\n          />\r\n          <!-- :error-message=\"phoneState\" phoneState()通过v-model判断计算属性-->\r\n          <!-- <van-field v-model=\"sms\" center clearable label=\"验证码\" placeholder=\"请输入短信验证码\">\r\n            <van-button slot=\"button\" size=\"small\" type=\"primary\">发送验证码</van-button>\r\n          </van-field>-->\r\n          <!-- <van-button type=\"primary\" size=\"normal\" :block=\"true\">下一步</van-button> -->\r\n          <van-button\r\n            type=\"primary\"\r\n            size=\"normal\"\r\n            :block=\"true\"\r\n            @click=\"findpwd\"\r\n            :disabled=\"pwdBtnflag\"\r\n            :style=\"{background: pwdColor,borderColor:pwdColor}\"\r\n            :ver=\"pwdFn()\"\r\n          >确认</van-button>\r\n        </van-cell-group>\r\n      </div>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport { NavBar, Button, Field, Popup, Cell, CellGroup } from 'vant'\r\nimport { Icon } from 'vant'\r\nimport { Dialog } from 'vant'\r\nimport { Toast } from 'vant'\r\nVue.use(NavBar) // 头部nav\r\nVue.use(Field) // input用户密码库\r\nVue.use(Button) // 按钮\r\nVue.use(Icon) // 提示icon\r\nVue.use(Popup) //弹出\r\nVue.use(Dialog)\r\nVue.use(Toast)\r\nVue.use(Cell).use(CellGroup)\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      phone: '',\r\n      password: '',\r\n      show: false,\r\n      sms: '',\r\n      code: 'a*a*a*',\r\n      btnflag: true,\r\n      pwdBtnflag: true,\r\n      btnColor: '#ccc',\r\n      pwdColor: '#ccc'\r\n      // min: 0.5\r\n    }\r\n  },\r\n  beforeRouteEnter (to, from, next) {\r\n    next(vm => {\r\n      vm.show = true\r\n    })\r\n  },\r\n  methods: {\r\n    onClickBack () { // 事件返回\r\n      this.$router.back()\r\n    },\r\n    sendCode () {\r\n\r\n      fetch(\"http://106.14.213.84:8000/verify?username=\" + this.phone).then(res => res.json()).then(data => {\r\n        // console.log(data);\r\n\r\n        if (data === 0) {\r\n          Dialog.confirm({\r\n            title: '提示',\r\n            message: '改用户还未注册是否注册'\r\n          }).then(() => {\r\n            // on confirm\r\n            this.$router.push('/register')\r\n          }).catch(() => {\r\n            // on cancel\r\n          })\r\n        } else if (data === 1) {\r\n          fetch(\"https://www.daxunxun.com/users/sendCode?tel=\" + this.phone)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n              // console.log(data) //获取到的值0,获取失败，1已经注册，其他code\r\n              if (data === 0) {\r\n                Toast('该手机号注册失败')\r\n              } else if (data === 1) {\r\n                Toast('验证码为' + this.code)\r\n              } else {\r\n                Toast('验证码发送成功')\r\n                this.code = data.code\r\n              }\r\n            })\r\n        }\r\n      })\r\n    },\r\n    findpwd () {\r\n      if (this.sms !== this.code) {\r\n        Toast('验证码不对哦')\r\n      } else if (/^1[3456789]\\d{9}$/.test(this.phone) && this.password.length > 5 && this.sms.length > 4) {\r\n        fetch(\"http://106.14.213.84:8000/findpwd\", {\r\n          method: 'post',\r\n          headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n          },\r\n          body: \"username=\" + this.phone + \"&newpwd=\" + this.password\r\n        }).then(res => res.json()).then(data => {\r\n          // console.log(data);\r\n          if (data === 0) {\r\n            Toast('修改失败');\r\n          } else if (data === 1) {\r\n            Dialog.confirm({\r\n              title: '提示',\r\n              message: '修改成功，是否立即登录'\r\n            }).then(() => {\r\n              // on confirm\r\n              this.$router.push('/login')\r\n            }).catch(() => {\r\n              // on cancel\r\n            })\r\n          }\r\n        })\r\n      }\r\n    },\r\n    btnuseFn () { // 如果输入的手机号符合正则，发送验证码的框框才会可以点击\r\n      if (/^1[3456789]\\d{9}$/.test(this.phone)) {\r\n        this.btnflag = false\r\n        this.btnColor = '#07c160'\r\n        this.data1 = ''\r\n      } else {\r\n        this.btnflag = true\r\n        this.btnColor = '#ccc'\r\n      }\r\n    },\r\n    pwdFn () { // 如果输入的手机号符合正则，发送验证码的框框才会可以点击\r\n      if (/^1[3456789]\\d{9}$/.test(this.phone) && this.password.length > 5 && this.sms.length > 4) {\r\n        this.pwdBtnflag = false\r\n        this.pwdColor = '#07c160'\r\n        this.data1 = ''\r\n      } else {\r\n        this.pwdBtnflag = true\r\n        this.pwdColor = '#ccc'\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    phoneState () {\r\n      if (this.phone === \"\") {\r\n        return \"\"\r\n      } else if (!(/^1[3456789]\\d{9}$/.test(this.phone))) {\r\n        return \"手机号格式错误\"\r\n      } else {\r\n        return \"\"\r\n      }\r\n    },\r\n    phonIcon () {\r\n      if (this.phone === \"\") {\r\n        return \"\"\r\n      } else if (/^1[3456789]\\d{9}$/.test(this.phone)) {\r\n        return \"passed\"\r\n      } else {\r\n        return \"\"\r\n      }\r\n    },\r\n    passwordIcon () {\r\n      if (this.password === '') {\r\n        return null\r\n      }\r\n      if (this.password.length > 5) {\r\n        return 'passed'\r\n      }\r\n    },\r\n    passwordState () {\r\n      if (this.password === '') {\r\n        return null\r\n      }\r\n      if (this.password.length < 5) {\r\n        return '密码长度不能小于5'\r\n      } else {\r\n        return null\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=75a000b1&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}