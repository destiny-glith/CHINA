{"version":3,"sources":["webpack:///./src/views/register/index.vue?18eb","webpack:///src/views/register/index.vue","webpack:///./src/views/register/index.vue?7667","webpack:///./src/views/register/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","style","height","attrs","position","duration","model","value","callback","$$v","show","expression","title","left-text","left-arrow","on","click-left","onClickBack","verify","btnuseFn","required","clearable","label","right-icon","phonIcon","placeholder","error-message","phoneState","phone","type","passwordIcon","passwordState","password","center","sms","background","btnColor","borderColor","slot","size","disabled","btnflag","click","sendCode","_v","block","register","staticRenderFns","vue_runtime_esm","use","nav_bar","field","es_button","icon","popup","dialog","toast","cell","cell_group","registervue_type_script_lang_js_","data","code","beforeRouteEnter","to","from","next","vm","methods","$router","back","_this","fetch","then","res","json","console","log","Object","_this2","test","length","method","headers","Content-Type","body","confirm","message","push","catch","data1","computed","views_registervue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d21e936.1824b4b9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('van-popup',{style:({ height: '100%' }),attrs:{\"position\":\"bottom\",\"duration\":0.5},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('van-nav-bar',{attrs:{\"title\":\"注册\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickBack}}),_c('div',{staticClass:\"main\",attrs:{\"verify\":_vm.btnuseFn()}},[_c('van-cell-group',[_c('van-field',{attrs:{\"required\":\"\",\"clearable\":\"\",\"label\":\"手机号\",\"right-icon\":_vm.phonIcon,\"placeholder\":\"请输入手机号\",\"error-message\":_vm.phoneState},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"label\":\"密码\",\"placeholder\":\"请输入密码\",\"right-icon\":_vm.passwordIcon,\"error-message\":_vm.passwordState,\"required\":\"\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('van-field',{attrs:{\"center\":\"\",\"clearable\":\"\",\"label\":\"短信验证码\",\"placeholder\":\"请输入验证码\"},model:{value:(_vm.sms),callback:function ($$v) {_vm.sms=$$v},expression:\"sms\"}},[_c('van-button',{style:({background: _vm.btnColor,borderColor:_vm.btnColor}),attrs:{\"slot\":\"button\",\"size\":\"small\",\"type\":\"primary\",\"disabled\":_vm.btnflag},on:{\"click\":_vm.sendCode},slot:\"button\"},[_vm._v(\"发送验证码\")])],1),_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"normal\",\"block\":true},on:{\"click\":_vm.register}},[_vm._v(\"注册\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <van-popup v-model=\"show\" position=\"bottom\" :style=\"{ height: '100%' }\" :duration=\"0.5\">\r\n      <van-nav-bar\r\n        title=\"注册\"\r\n        left-text=\"返回\"\r\n        left-arrow\r\n        @click-left=\"onClickBack\"\r\n      />\r\n      <div class=\"main\" :verify=\"btnuseFn()\">\r\n        <van-cell-group>\r\n          <van-field\r\n            v-model=\"phone\"\r\n            required\r\n            clearable\r\n            label=\"手机号\"\r\n            :right-icon=\"phonIcon\"\r\n            placeholder=\"请输入手机号\"\r\n            :error-message=\"phoneState\"\r\n          />\r\n          <van-field\r\n            v-model=\"password\"\r\n            type=\"password\"\r\n            label=\"密码\"\r\n            placeholder=\"请输入密码\"\r\n            :right-icon=\"passwordIcon\"\r\n            :error-message=\"passwordState\"\r\n            required\r\n          />\r\n          <!-- :error-message=\"phoneState\" phoneState()通过v-model判断计算属性-->\r\n          <!-- <van-field v-model=\"sms\" center clearable label=\"验证码\" placeholder=\"请输入短信验证码\">\r\n            <van-button slot=\"button\" size=\"small\" type=\"primary\">发送验证码</van-button>\r\n          </van-field>-->\r\n          <van-field v-model=\"sms\" center clearable label=\"短信验证码\" placeholder=\"请输入验证码\">\r\n            <van-button\r\n              slot=\"button\"\r\n              size=\"small\"\r\n              type=\"primary\"\r\n              @click=\"sendCode\"\r\n              :disabled=\"btnflag\"\r\n              :style=\"{background: btnColor,borderColor:btnColor}\"\r\n            >发送验证码</van-button>\r\n          </van-field>\r\n          <!-- <van-button type=\"primary\" size=\"normal\" :block=\"true\">下一步</van-button> -->\r\n          <van-button type=\"primary\" size=\"normal\" :block=\"true\" @click=\"register\">注册</van-button>\r\n        </van-cell-group>\r\n      </div>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport { NavBar, Button, Field, Popup, Cell, CellGroup } from 'vant'\r\nimport { Icon } from 'vant'\r\nimport { Dialog } from 'vant'\r\nimport { Toast } from 'vant'\r\nVue.use(NavBar) // 头部nav\r\nVue.use(Field) // input用户密码库\r\nVue.use(Button) // 按钮\r\nVue.use(Icon) // 提示icon\r\nVue.use(Popup) //弹出\r\nVue.use(Dialog)\r\nVue.use(Toast)\r\nVue.use(Cell).use(CellGroup)\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      phone: '',\r\n      password: '',\r\n      show: false,\r\n      sms: '',\r\n      code: 'a*a*a*',\r\n      btnflag: true,\r\n      btnColor: '#ccc'\r\n      // min: 0.5\r\n    }\r\n  },\r\n  beforeRouteEnter (to, from, next) {\r\n    next(vm => {\r\n      vm.show = true\r\n    })\r\n  },\r\n  methods: {\r\n    onClickBack () { // 事件返回\r\n      this.$router.back()\r\n    },\r\n    sendCode () {\r\n      fetch(\"https://www.daxunxun.com/users/sendCode?tel=\" + this.phone)\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          console.log(data) //获取到的值0,获取失败，1已经注册，其他code\r\n          if (data === 0) {\r\n            Toast('该手机号注册失败');\r\n          } else if (data === 1) {\r\n            fetch(\"http://106.14.213.84:8000/verify?username=\" + this.phone).then(res => res.json()).then(data => {\r\n              if (data === 0) {\r\n                Toast('验证码为' + this.code)\r\n              }else{\r\n                Toast('用户已存在')\r\n              }\r\n            })\r\n          } else {\r\n            Toast('验证码发送成功');\r\n            this.code = data.code\r\n          }\r\n        })\r\n    },\r\n    register () {\r\n      if (this.code !== this.sms) {\r\n        Toast('验证码不对哦')\r\n      } else if (/^1[3456789]\\d{9}$/.test(this.phone) && this.password.length > 5) {\r\n        fetch(\"http://106.14.213.84:8000/register\", {\r\n          method: 'post',\r\n          headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n          },\r\n          body: \"username=\" + this.phone + \"&password=\" + this.password\r\n        }).then(res => res.json()).then(data => {\r\n          console.log(data);\r\n          if (data === 0) {\r\n            Toast('已被注册');\r\n          } else if (data === 1) {\r\n            Dialog.confirm({\r\n              title: '提示',\r\n              message: '注册成功，是否直接登录'\r\n            }).then(() => {\r\n              // on confirm\r\n              this.$router.push('/login')\r\n            }).catch(() => {\r\n              // on cancel\r\n            });\r\n          }\r\n        })\r\n      }\r\n    },\r\n    btnuseFn () { // 如果输入的手机号符合正则，发送验证码的框框才会可以点击\r\n      if (/^1[3456789]\\d{9}$/.test(this.phone) && this.password.length > 5) {\r\n        this.btnflag = false\r\n        this.btnColor = '#07c160'\r\n        this.data1 = ''\r\n      } else {\r\n        this.btnflag = true\r\n        this.btnColor = '#ccc'\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    phoneState () {\r\n      if (this.phone === \"\") {\r\n        return \"\"\r\n      } else if (!(/^1[3456789]\\d{9}$/.test(this.phone))) {\r\n        return \"手机号格式错误\"\r\n      } else {\r\n        return \"\"\r\n      }\r\n    },\r\n    phonIcon () {\r\n      if (this.phone === \"\") {\r\n        return \"\"\r\n      } else if (/^1[3456789]\\d{9}$/.test(this.phone)) {\r\n        return \"passed\"\r\n      } else {\r\n        return \"\"\r\n      }\r\n    },\r\n    passwordIcon () {\r\n      if (this.password === '') {\r\n        return null\r\n      }\r\n      if (this.password.length > 5) {\r\n        return 'passed'\r\n      }\r\n    },\r\n    passwordState () {\r\n      if (this.password === '') {\r\n        return null\r\n      }\r\n      if (this.password.length < 5) {\r\n        return '密码长度不能小于5'\r\n      } else {\r\n        return null\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5ed1c19e&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}